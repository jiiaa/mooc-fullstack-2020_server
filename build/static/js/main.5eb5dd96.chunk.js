(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(14),u=t(2),o=t(0),r=t.n(o),c=t(13),l=t.n(c),i=t(3),m=t.n(i),s="/api/persons",f=function(){return m.a.get(s).then((function(e){return e.data}))},d=function(e){return m.a.post(s,e).then((function(e){return e.data}))},h=function(e){return m.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},b=function(e){return m.a.put("".concat(s,"/").concat(e.id),e).then((function(e){return e.data}))},E=function(e){var n=e.onsubmit,t=e.handleName,a=e.handleNumber,u=e.newName,o=e.newNumber;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"name"},"Name:"),r.a.createElement("input",{id:"name",onChange:t,value:u,placeholder:"Enter name"}),r.a.createElement("label",{htmlFor:"number"},"Phone: "),r.a.createElement("input",{id:"number",onChange:a,value:o,placeholder:"Enter phone number"})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"Add"))))},p=function(e){var n=e.onchange;return r.a.createElement("div",null,"Filter shown with ",r.a.createElement("input",{onChange:n}))},w=function(e){var n=e.person,t=e.handleDelete;return r.a.createElement("div",null,n.name," ",n.number," ",r.a.createElement("button",{onClick:function(){return t(n.id)}},"Delete"))},v=function(e){var n=e.showList,t=e.handleDelete;return r.a.createElement("div",null,n.map((function(e){return r.a.createElement(w,{key:e.name,person:e,handleDelete:t})})))},N=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{className:"notification"},n)},g=(t(37),function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],l=Object(o.useState)(""),i=Object(u.a)(l,2),m=i[0],s=i[1],w=Object(o.useState)(""),g=Object(u.a)(w,2),j=g[0],O=g[1],D=Object(o.useState)([]),y=Object(u.a)(D,2),C=y[0],L=y[1],k=Object(o.useState)(null),S=Object(u.a)(k,2),T=S[0],A=S[1];Object(o.useEffect)((function(){f().then((function(e){c(e)}))}),[]);var F=function(e){var n=t.filter((function(n){return n.id===e}));window.confirm("Delete ".concat(n[0].name,"?"))&&h(e).then((function(e){f().then((function(e){c(e),A("".concat(n[0].name," was successfully deleted.")),setTimeout((function(){A(null)}),3e3)}))})).catch((function(e){console.log("delNames error:",e),A("".concat(n.name," was not found.")),setTimeout((function(){A(null)}),3e3),f().then((function(e){c(e)})),s(""),O("")}))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(N,{message:T}),r.a.createElement(p,{onchange:function(e){var n=e.target.value,a=[];n&&(a=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))),L(a)}}),r.a.createElement("h3",null,"Add A New Name"),r.a.createElement(E,{onsubmit:function(e){e.preventDefault();var n={name:m,number:j},u=t.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()}));if(u){if(window.confirm("".concat(u.name," was already added to the phonebook. Do you want to replace the old phone number with the new one?"))){var o=Object(a.a)({},u,{number:j});b(o).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e}))),A("Phone number of ".concat(e.name," was successfully changed.")),setTimeout((function(){A(null)}),3e3),s(""),O("")})).catch((function(e){console.log("update Number:",e),A("".concat(u.name," was not found.")),setTimeout((function(){A(null)}),3e3),f().then((function(e){c(e)})),s(""),O("")}))}}else d(n).then((function(e){c(t.concat(e)),A("".concat(e.name," was successfully added.")),setTimeout((function(){A(null)}),3e3),s(""),O("")})).catch((function(e){console.log("addName error:",e.response.data),A(e.response.data.error),setTimeout((function(){A(null)}),3e3),s(""),O("")}))},handleName:function(e){return s(e.target.value)},handleNumber:function(e){return O(e.target.value)},newName:m,newNumber:j}),r.a.createElement("h3",null,"Filtered Numbers"),r.a.createElement(v,{showList:C,handleDelete:F}),r.a.createElement("h3",null,"All Numbers"),r.a.createElement(v,{showList:t,handleDelete:F}))});l.a.render(r.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.5eb5dd96.chunk.js.map