(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(14),u=t(2),c=t(0),o=t.n(c),r=t(13),l=t.n(r),i=t(3),m=t.n(i),s="/api/persons",f=function(){return m.a.get(s).then((function(e){return e.data}))},d=function(e){return m.a.post(s,e).then((function(e){return e.data}))},h=function(e){return m.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},b=function(e){return m.a.put("".concat(s,"/").concat(e.id),e).then((function(e){return e.data}))},E=function(e){var n=e.onsubmit,t=e.handleName,a=e.handleNumber,u=e.newName,c=e.newNumber;return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:n},o.a.createElement("div",null,o.a.createElement("label",{htmlFor:"name"},"Name:"),o.a.createElement("input",{id:"name",onChange:t,value:u,placeholder:"Enter name"}),o.a.createElement("label",{htmlFor:"number"},"Phone: "),o.a.createElement("input",{id:"number",onChange:a,value:c,placeholder:"Enter phone number"})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"Add"))))},w=function(e){var n=e.onchange;return o.a.createElement("div",null,"Filter shown with ",o.a.createElement("input",{onChange:n}))},p=function(e){var n=e.person,t=e.handleDelete;return o.a.createElement("div",null,n.name," ",n.number," ",o.a.createElement("button",{onClick:function(){return t(n.id)}},"Delete"))},v=function(e){var n=e.showList,t=e.handleDelete;return o.a.createElement("div",null,n.map((function(e){return o.a.createElement(p,{key:e.name,person:e,handleDelete:t})})))},N=function(e){var n=e.message;return null===n?null:o.a.createElement("div",{className:"notification"},n)},g=(t(37),function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],l=Object(c.useState)(""),i=Object(u.a)(l,2),m=i[0],s=i[1],p=Object(c.useState)(""),g=Object(u.a)(p,2),j=g[0],O=g[1],D=Object(c.useState)([]),y=Object(u.a)(D,2),C=y[0],L=y[1],k=Object(c.useState)(null),S=Object(u.a)(k,2),T=S[0],A=S[1];Object(c.useEffect)((function(){f().then((function(e){r(e)}))}),[]);var F=function(e){var n=t.filter((function(n){return n.id===e}));window.confirm("Delete ".concat(n[0].name,"?"))&&h(e).then((function(e){f().then((function(e){r(e),A("".concat(n[0].name," was successfully deleted.")),setTimeout((function(){A(null)}),3e3)}))})).catch((function(e){console.log("delNames error:",e),A("".concat(n.name," was not found.")),setTimeout((function(){A(null)}),3e3),f().then((function(e){r(e)})),s(""),O("")}))};return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(N,{message:T}),o.a.createElement(w,{onchange:function(e){var n=e.target.value,a=[];n&&(a=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))),L(a)}}),o.a.createElement("h3",null,"Add A New Name"),o.a.createElement(E,{onsubmit:function(e){e.preventDefault();var n={name:m,number:j},u=t.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()}));if(u){if(window.confirm("".concat(u.name," was already added to the phonebook. Do you want to replace the old phone number with the new one?"))){var c=Object(a.a)({},u,{number:j});b(c).then((function(e){r(t.map((function(n){return n.id!==e.id?n:e}))),A("Phone number of ".concat(e.name," was successfully changed.")),setTimeout((function(){A(null)}),3e3),s(""),O("")})).catch((function(e){console.log("update Number:",e),A("".concat(u.name," was not found.")),setTimeout((function(){A(null)}),3e3),f().then((function(e){r(e)})),s(""),O("")}))}}else d(n).then((function(e){r(t.concat(e)),A("".concat(e.name," was successfully added.")),setTimeout((function(){A(null)}),3e3),s(""),O("")})).catch((function(e){console.log("addName error:",e),s(""),O("")}))},handleName:function(e){return s(e.target.value)},handleNumber:function(e){return O(e.target.value)},newName:m,newNumber:j}),o.a.createElement("h3",null,"Filtered Numbers"),o.a.createElement(v,{showList:C,handleDelete:F}),o.a.createElement("h3",null,"All Numbers"),o.a.createElement(v,{showList:t,handleDelete:F}))});l.a.render(o.a.createElement(g,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.f6941486.chunk.js.map