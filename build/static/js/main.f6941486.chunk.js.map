{"version":3,"sources":["services/service.js","components/AddForm.js","components/Filter.js","components/Person.js","components/FilteredList.js","components/Notification.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newPerson","post","id","delete","person","put","AddForm","onsubmit","handleName","handleNumber","newName","newNumber","onSubmit","htmlFor","onChange","value","placeholder","type","Filter","onchange","Person","handleDelete","name","number","onClick","FilteredList","showList","map","key","Message","message","className","App","useState","persons","setPersons","setNewName","setNewNumber","setShowList","setMessage","useEffect","serverService","deleteName","target","filter","p","window","confirm","setTimeout","catch","error","console","log","Notification","e","list","toLowerCase","includes","preventDefault","match","find","changedNumber","concat","ReactDOM","render","document","getElementById"],"mappings":"uPAGMA,EAAU,eAuBD,EApBA,WAEX,OADgBC,IAAMC,IAAIF,GACXG,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAkB9B,EAfA,SAAAC,GAEX,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAa9B,EAVC,SAAAG,GAEZ,OADgBP,IAAMQ,OAAN,UAAgBT,EAAhB,YAA2BQ,IAC5BL,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SAQ9B,EALI,SAAAK,GAEf,OADgBT,IAAMU,IAAN,UAAaX,EAAb,YAAwBU,EAAOF,IAAME,GACtCP,MAAK,SAAAC,GAAQ,OAAIA,EAASC,SCL9BO,EAhBC,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAUC,EAAb,EAAaA,WAAYC,EAAzB,EAAyBA,aAAcC,EAAvC,EAAuCA,QAASC,EAAhD,EAAgDA,UAAhD,OACZ,6BACI,0BAAMC,SAAUL,GACZ,6BACI,2BAAOM,QAAQ,QAAf,SACA,2BAAOX,GAAG,OAAOY,SAAUN,EAAYO,MAAOL,EAASM,YAAY,eACnE,2BAAOH,QAAQ,UAAf,WACA,2BAAOX,GAAG,SAASY,SAAUL,EAAcM,MAAOJ,EAAWK,YAAY,wBAE7E,6BACI,4BAAQC,KAAK,UAAb,WCJDC,EANA,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAH,OACX,kDACsB,2BAAOL,SAAUK,MCI5BC,EANA,SAAC,GAAD,IAAGhB,EAAH,EAAGA,OAAQiB,EAAX,EAAWA,aAAX,OACX,6BACKjB,EAAOkB,KADZ,IACmBlB,EAAOmB,OAD1B,IACkC,4BAAQC,QAAS,kBAAMH,EAAajB,EAAOF,MAA3C,YCQvBuB,EATM,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAUL,EAAb,EAAaA,aAAb,OACjB,6BACKK,EAASC,KAAI,SAAAvB,GAAM,OAChB,kBAAC,EAAD,CAAQwB,IAAKxB,EAAOkB,KAAMlB,OAAQA,EAAQiB,aAAcA,SCQrDQ,EAZC,SAAC,GAAiB,IAAfC,EAAc,EAAdA,QACf,OAAgB,OAAZA,EACO,KAIP,yBAAKC,UAAU,gBACVD,ICGPE,G,MAAM,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACTC,EADS,KACAC,EADA,OAEcF,mBAAS,IAFvB,mBAETvB,EAFS,KAEA0B,EAFA,OAGkBH,mBAAS,IAH3B,mBAGTtB,EAHS,KAGE0B,EAHF,OAIgBJ,mBAAS,IAJzB,mBAITP,EAJS,KAICY,EAJD,OAKcL,mBAAS,MALvB,mBAKTH,EALS,KAKAS,EALA,KAOhBC,qBAAU,WACRC,IAEG5C,MAAK,SAAAC,GACJqC,EAAWrC,QAEd,IAEH,IAoFM4C,EAAa,SAAAxC,GACjB,IAAMyC,EAAST,EAAQU,QAAO,SAAAC,GAAC,OAAIA,EAAE3C,KAAOA,KACxC4C,OAAOC,QAAP,iBAAyBJ,EAAO,GAAGrB,KAAnC,OACFmB,EACWvC,GACRL,MAAK,SAAAC,GACJ2C,IAEG5C,MAAK,SAAAC,GACJqC,EAAWrC,GACXyC,EAAW,GAAD,OACLI,EAAO,GAAGrB,KADL,+BAGV0B,YAAW,WACTT,EAAW,QACV,WAGRU,OAAM,SAAAC,GACLC,QAAQC,IAAI,kBAAmBF,GAC/BX,EAAW,GAAD,OACLI,EAAOrB,KADF,oBAGV0B,YAAW,WACTT,EAAW,QACV,KACHE,IAEG5C,MAAK,SAAAC,GACJqC,EAAWrC,MAEfsC,EAAW,IACXC,EAAa,QAMrB,OACE,6BACE,yCACA,kBAACgB,EAAD,CAAcvB,QAASA,IACvB,kBAAC,EAAD,CAAQX,SAtHS,SAAAmC,GACnB,IAAMV,EAASU,EAAEX,OAAO5B,MACpBwC,EAAO,GACPX,IACFW,EAAOrB,EAAQU,QAAO,SAAAC,GAAC,OACrBA,EAAEvB,KAAKkC,cAAcC,SAASb,EAAOY,mBAGzClB,EAAYiB,MA+GV,8CACA,kBAAC,EAAD,CACEhD,SA9GU,SAAA+C,GACdA,EAAEI,iBACF,IAAM1D,EAAY,CAChBsB,KAAMZ,EACNa,OAAQZ,GAEJgD,EAAQzB,EAAQ0B,MAAK,SAAAxD,GAAM,OAC/BA,EAAOkB,KAAKkC,gBAAkBxD,EAAUsB,KAAKkC,iBAE/C,GAAIG,GACF,GAAIb,OAAOC,QAAP,UAAkBY,EAAMrC,KAAxB,uGAAmI,CACrI,IAAMuC,EAAa,eAAQF,EAAR,CAAepC,OAAQZ,IAC1C8B,EACcoB,GACXhE,MAAK,SAAAC,GACJqC,EAAWD,EAAQP,KAAI,SAAAkB,GAAC,OAAIA,EAAE3C,KAAOJ,EAASI,GAAK2C,EAAI/C,MACvDyC,EAAW,mBAAD,OACWzC,EAASwB,KADpB,+BAGV0B,YAAW,WACTT,EAAW,QACV,KACHH,EAAW,IACXC,EAAa,OAEdY,OAAM,SAAAC,GACLC,QAAQC,IAAI,iBAAkBF,GAC9BX,EAAW,GAAD,OACLoB,EAAMrC,KADD,oBAGV0B,YAAW,WACTT,EAAW,QACV,KACHE,IAEG5C,MAAK,SAAAC,GACJqC,EAAWrC,MAEfsC,EAAW,IACXC,EAAa,aAInBI,EACUzC,GACPH,MAAK,SAAAC,GACJqC,EAAWD,EAAQ4B,OAAOhE,IAC1ByC,EAAW,GAAD,OACLzC,EAASwB,KADJ,6BAGV0B,YAAW,WACTT,EAAW,QACV,KACHH,EAAW,IACXC,EAAa,OAEdY,OAAM,SAAAC,GACLC,QAAQC,IAAI,iBAAkBF,GAC9Bd,EAAW,IACXC,EAAa,QAoDf7B,WAlImB,SAAA8C,GAAC,OACxBlB,EAAWkB,EAAEX,OAAO5B,QAkIhBN,aA/HqB,SAAA6C,GAAC,OAC1BjB,EAAaiB,EAAEX,OAAO5B,QA+HlBL,QAASA,EACTC,UAAWA,IAEb,gDACA,kBAAC,EAAD,CAAce,SAAUA,EAAUL,aAAcqB,IAChD,2CACA,kBAAC,EAAD,CAAchB,SAAUQ,EAASb,aAAcqB,OAKrDqB,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.f6941486.chunk.js","sourcesContent":["import axios from 'axios';\r\n\r\n// const baseUrl = 'http://localhost:3001/api/persons';\r\nconst baseUrl = '/api/persons';\r\n// const baseUrl = 'https://mooc-osa3.herokuapp.com/api/persons';\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst addNew = newPerson => {\r\n    const request = axios.post(baseUrl, newPerson);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst delName = id => {\r\n    const request = axios.delete(`${baseUrl}/${id}`);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nconst updateName = person => {\r\n    const request = axios.put(`${baseUrl}/${person.id}`, person);\r\n    return request.then(response => response.data);\r\n}\r\n\r\nexport default { getAll, addNew, delName, updateName }\r\n","import React from 'react';\r\n\r\nconst AddForm = ({ onsubmit, handleName, handleNumber, newName, newNumber}) => (\r\n    <div>\r\n        <form onSubmit={onsubmit}>\r\n            <div>\r\n                <label htmlFor=\"name\">Name:</label>\r\n                <input id=\"name\" onChange={handleName} value={newName} placeholder='Enter name' />\r\n                <label htmlFor=\"number\">Phone: </label>\r\n                <input id=\"number\" onChange={handleNumber} value={newNumber} placeholder='Enter phone number' />\r\n            </div>\r\n            <div>\r\n                <button type=\"submit\">Add</button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n)\r\n\r\nexport default AddForm;","import React from 'react';\r\n\r\nconst Filter = ({ onchange }) => (\r\n    <div>\r\n        Filter shown with <input onChange={onchange} />\r\n    </div>\r\n)\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst Person = ({ person, handleDelete }) => (\r\n    <div>\r\n        {person.name} {person.number} <button onClick={() => handleDelete(person.id)}>Delete</button>\r\n    </div>\r\n)\r\n\r\nexport default Person;","import React from 'react';\r\nimport Person from './Person';\r\n\r\nconst FilteredList = ({ showList, handleDelete }) => (\r\n    <div>\r\n        {showList.map(person => (\r\n            <Person key={person.name} person={person} handleDelete={handleDelete} />\r\n        ))\r\n        }\r\n    </div>\r\n)\r\n\r\nexport default FilteredList;","import React from 'react';\r\n\r\nconst Message = ({ message }) => {\r\n    if (message === null) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className=\"notification\">\r\n            {message}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Message;","import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\n\nimport serverService from './services/service';\n\nimport AddForm from './components/AddForm';\nimport Filter from './components/Filter';\nimport FilteredList from './components/FilteredList';\nimport Notification from './components/Notification';\n\nimport './index.css';\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [showList, setShowList] = useState([]);\n  const [message, setMessage] = useState(null);\n\n  useEffect(() => {\n    serverService\n      .getAll()\n      .then(response => {\n        setPersons(response)\n      })\n  }, []);\n\n  const handleNameChange = e => (\n    setNewName(e.target.value)\n  )\n\n  const handleNumberChange = e => (\n    setNewNumber(e.target.value)\n  )\n\n  const handleFilter = e => {\n    const filter = e.target.value;\n    let list = [];\n    if (filter) {\n      list = persons.filter(p => (\n        p.name.toLowerCase().includes(filter.toLowerCase())\n      ))\n    }\n    setShowList(list);\n  }\n\n  const addName = e => {\n    e.preventDefault();\n    const newPerson = {\n      name: newName,\n      number: newNumber\n    };\n    const match = persons.find(person => (\n      person.name.toLowerCase() === newPerson.name.toLowerCase()\n    ))\n    if (match) {\n      if (window.confirm(`${match.name} was already added to the phonebook. Do you want to replace the old phone number with the new one?`)) {\n        const changedNumber = { ...match, number: newNumber };\n        serverService\n          .updateName(changedNumber)\n          .then(response => {\n            setPersons(persons.map(p => p.id !== response.id ? p : response));\n            setMessage(\n              `Phone number of ${response.name} was successfully changed.`\n            );\n            setTimeout(() => {\n              setMessage(null)\n            }, 3000);\n            setNewName('');\n            setNewNumber('');\n          })\n          .catch(error => {\n            console.log('update Number:', error);\n            setMessage(\n              `${match.name} was not found.`\n            );\n            setTimeout(() => {\n              setMessage(null)\n            }, 3000);\n            serverService\n              .getAll()\n              .then(response => {\n                setPersons(response)\n              });\n            setNewName('');\n            setNewNumber('');\n          })\n      }\n    } else {\n      serverService\n        .addNew(newPerson)\n        .then(response => {\n          setPersons(persons.concat(response));\n          setMessage(\n            `${response.name} was successfully added.`\n          );\n          setTimeout(() => {\n            setMessage(null)\n          }, 3000);\n          setNewName('');\n          setNewNumber('');\n        })\n        .catch(error => {\n          console.log('addName error:', error);\n          setNewName('');\n          setNewNumber('');\n\n        })\n    }\n  }\n\n  const deleteName = id => {\n    const target = persons.filter(p => p.id === id);\n    if (window.confirm(`Delete ${target[0].name}?`)) {\n      serverService\n        .delName(id)\n        .then(response => {\n          serverService\n            .getAll()\n            .then(response => {\n              setPersons(response)\n              setMessage(\n                `${target[0].name} was successfully deleted.`\n              );\n              setTimeout(() => {\n                setMessage(null)\n              }, 3000);\n            })\n        })\n        .catch(error => {\n          console.log('delNames error:', error);\n          setMessage(\n            `${target.name} was not found.`\n          );\n          setTimeout(() => {\n            setMessage(null)\n          }, 3000);\n          serverService\n            .getAll()\n            .then(response => {\n              setPersons(response)\n            })\n          setNewName('');\n          setNewNumber('');\n\n        })\n    }\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={message} />\n      <Filter onchange={handleFilter} />\n      <h3>Add A New Name</h3>\n      <AddForm\n        onsubmit={addName}\n        handleName={handleNameChange}\n        handleNumber={handleNumberChange}\n        newName={newName}\n        newNumber={newNumber}\n      />\n      <h3>Filtered Numbers</h3>\n      <FilteredList showList={showList} handleDelete={deleteName} />\n      <h3>All Numbers</h3>\n      <FilteredList showList={persons} handleDelete={deleteName} />\n    </div>\n  )\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}