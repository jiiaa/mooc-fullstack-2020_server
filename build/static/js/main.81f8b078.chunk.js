(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(14),u=t(2),o=t(0),c=t.n(o),r=t(13),l=t.n(r),i=t(3),m=t.n(i),s="/api/persons",d=function(){return m.a.get(s).then((function(e){return e.data}))},f=function(e){return m.a.post(s,e).then((function(e){return console.log(e.data),e.data}))},h=function(e){return m.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},b=function(e){return m.a.put("".concat(s,"/").concat(e.id),e).then((function(e){return e.data}))},E=function(e){var n=e.onsubmit,t=e.handleName,a=e.handleNumber,u=e.newName,o=e.newNumber;return c.a.createElement("div",null,c.a.createElement("form",{onSubmit:n},c.a.createElement("div",null,c.a.createElement("label",{htmlFor:"name"},"Name:"),c.a.createElement("input",{id:"name",onChange:t,value:u,placeholder:"Enter name"}),c.a.createElement("label",{htmlFor:"number"},"Phone: "),c.a.createElement("input",{id:"number",onChange:a,value:o,placeholder:"Enter phone number"})),c.a.createElement("div",null,c.a.createElement("button",{type:"submit"},"Add"))))},p=function(e){var n=e.onchange;return c.a.createElement("div",null,"Filter shown with ",c.a.createElement("input",{onChange:n}))},w=function(e){var n=e.person,t=e.handleDelete;return c.a.createElement("div",null,n.name," ",n.number," ",c.a.createElement("button",{onClick:function(){return t(n.id)}},"Delete"))},v=function(e){var n=e.showList,t=e.handleDelete;return c.a.createElement("div",null,n.map((function(e){return c.a.createElement(w,{key:e.name,person:e,handleDelete:t})})))},g=function(e){var n=e.message;return null===n?null:c.a.createElement("div",{className:"notification"},n)},N=(t(37),function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],r=n[1],l=Object(o.useState)(""),i=Object(u.a)(l,2),m=i[0],s=i[1],w=Object(o.useState)(""),N=Object(u.a)(w,2),j=N[0],O=N[1],D=Object(o.useState)([]),y=Object(u.a)(D,2),C=y[0],L=y[1],k=Object(o.useState)(null),S=Object(u.a)(k,2),T=S[0],A=S[1];Object(o.useEffect)((function(){d().then((function(e){r(e)}))}),[]);var F=function(e){var n=t.filter((function(n){return n.id===e}));window.confirm("Delete ".concat(n[0].name,"?"))&&h(e).then((function(e){d().then((function(e){r(e),A("".concat(n[0].name," was successfully deleted.")),setTimeout((function(){A(null)}),3e3)}))})).catch((function(e){console.log("delNames error:",e),A("".concat(n.name," was not found.")),setTimeout((function(){A(null)}),3e3),d().then((function(e){r(e)})),s(""),O("")}))};return c.a.createElement("div",null,c.a.createElement("h2",null,"Phonebook"),c.a.createElement(g,{message:T}),c.a.createElement(p,{onchange:function(e){var n=e.target.value,a=[];n&&(a=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))),L(a)}}),c.a.createElement("h3",null,"Add A New Name"),c.a.createElement(E,{onsubmit:function(e){e.preventDefault();var n={name:m,number:j},u=t.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()}));if(u){if(window.confirm("".concat(u.name," was already added to the phonebook. Do you want to replace the old phone number with the new one?"))){var o=Object(a.a)({},u,{number:j});b(o).then((function(e){r(t.map((function(n){return n.id!==e.id?n:e}))),A("Phone number of ".concat(e.name," was successfully changed.")),setTimeout((function(){A(null)}),3e3),s(""),O("")})).catch((function(e){console.log("update Number:",e),A("".concat(u.name," was not found.")),setTimeout((function(){A(null)}),3e3),d().then((function(e){r(e)})),s(""),O("")}))}}else f(n).then((function(e){r(t.concat(e)),A("".concat(e.name," was successfully added.")),setTimeout((function(){A(null)}),3e3),s(""),O("")})).catch((function(e){console.log("addName error:",e.response.data),A(e.response.data.error),setTimeout((function(){A(null)}),3e3),s(""),O("")}))},handleName:function(e){return s(e.target.value)},handleNumber:function(e){return O(e.target.value)},newName:m,newNumber:j}),c.a.createElement("h3",null,"Filtered Numbers"),c.a.createElement(v,{showList:C,handleDelete:F}),c.a.createElement("h3",null,"All Numbers"),c.a.createElement(v,{showList:t,handleDelete:F}))});l.a.render(c.a.createElement(N,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.81f8b078.chunk.js.map